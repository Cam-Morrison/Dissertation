<div class="content">
  <div class="dashboard">
    <h1>{{ username | titlecase }}'s administration panel</h1>
    <h2> {{respMsg}} </h2>
    <div>
      <form class="search-form">
        <mat-form-field>
          <input matInput (keyup)="applyFilter($any($event.target).value)">
          <mat-placeholder>Search</mat-placeholder>
          <mat-icon matSuffix style="font-size: 1.2em">search</mat-icon>
        </mat-form-field>
      </form>

    <table
      mat-table
      [dataSource]="dataSource" 
    >
      <!-- Time Column -->
      <ng-container matColumnDef="Time">
        <th mat-header-cell *matHeaderCellDef>Time</th>
        <td mat-cell *matCellDef="let element">
          {{ element.T | date : "medium" }}
        </td>
      </ng-container>

      <!-- UserID Column -->
      <ng-container matColumnDef="UserID">
        <th mat-header-cell *matHeaderCellDef>UserID</th>
        <td mat-cell *matCellDef="let element">
          {{ element.UID }}
        </td>
      </ng-container>

      <!-- Username Column -->
      <ng-container matColumnDef="User">
        <th mat-header-cell *matHeaderCellDef>User</th>
        <td mat-cell *matCellDef="let element">
          {{ element.UN | titlecase }}
        </td>
      </ng-container>

      <!-- Action name Column -->
      <ng-container matColumnDef="Action">
        <th mat-header-cell *matHeaderCellDef>Action</th>
        <td mat-cell *matCellDef="let element">
          {{ element.AN }}
        </td>
      </ng-container>

      <!-- Account lock Column -->
      <ng-container matColumnDef="Status">
        <th mat-header-cell *matHeaderCellDef>Status</th>
        <td
          mat-cell
          *matCellDef="let element"
          [ngClass]="{
            unlocked: element.L == false,
            locked: element.L == true
          }"
        >
          <button *ngIf="element.UN != username;" mat-button color="primary" (click)="lock(element)">
            <span>{{ element.L ? "Unlock" : "Lock" }}</span>
          </button>
        </td>
      </ng-container>
      <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
    </table>

    <mat-paginator [pageSizeOptions]="[10, 20, 30]" showFirstLastButtons></mat-paginator>
    </div>
  </div>
  <!-- Loader -->
  <div class="spinbox" *ngIf="isLoading">
    <mat-progress-spinner color="primary" mode="indeterminate">
    </mat-progress-spinner>
  </div>
</div>
